---
slug: signature-html-to-json
title: 加入簽名元件，讓表單更完整；轉換工具更強大
date: 2024-07-07
authors: [rich]
tags: [簽名, html轉json, 表單設計, fyro]
---

這一篇的主題有兩個重點：

- 表單終於可以簽名了！
- HTML → JSON 轉換邏輯全面升級，支援 label 換行與欄位邏輯

---

## ✍️ 表單簽名元件完成

這是一個實際客戶會需要的場景，例如：醫療表單、同意書、評核回覆等，在最後需要當事人簽名確認。

fyro.ai 現在的簽名方式是這樣的：

- 使用者點擊「請簽名」按鈕後，會開啟一個彈出視窗
- 裡面內嵌了 SignaturePad 元件，可以用滑鼠/觸控直接簽
- 簽名完成後，會以 base64 的方式儲存
- 可重簽，也支援圖片預覽與取代

這個元件也可以整合進 iframe/webview 的版面，並同步到後端。

---

## 🔄 HTML → JSON 功能強化

我們一直在做的事情就是：**讓 fyro.ai 能吃下「任何現有表單」的 HTML 結構**，然後轉出我們自己的 JSON 格式。這次的升級包含：

- 支援 `label` 文字超長自動換行
- HTML 中的欄位名稱會轉成 JSON 的 `ObjId`
- 新增支援 `DataOutputName`, `Required`, `Hide` 等欄位屬性
- `Select`, `Checkbox`, `Radio` 欄位皆可正確轉換
- 預備支援「欄位公式」邏輯（如自動加總、文字組合）

這讓我們可以從 Word 檔、掃描 PDF 重建成 fyro 版表單，只要先轉成 HTML，再跑 parser 即可。

---

## ✅ 附註：表單公式支援即將完成

這次也測試了 `.razor` 中加入公式判斷的能力：

- 每個欄位可有 `Formula` 屬性
- 會透過 Roslyn 編譯時執行公式
- 可支援欄位之間的相依關係、加總、拼字等操作

這部分的功能會在下一篇正式公開！

---

> fyro.ai 不只是幫你畫出表單，而是讓這些表單具備**互動、驗證、簽署、儲存與運算邏輯**，全部結合成一個模組化的「資料輸入介面」。

下一階段，我們會介紹怎麼把 fyro 的表單送出後整合到 ElasticSearch 或呼叫 webhook。Stay tuned 🚀
